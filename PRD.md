# 产品需求文档 (PRD)：AssetSnap (资产快照) MVP

**版本：** V1.2 (基线版)

**产品定位：** 一款去账务化、以“周期性盘点”为核心的资产配置与净资产管理工具。

---

## 1. 产品概述与核心价值

针对高净值及专业人士（如 AI/软件工程师），解决传统记账应用“维护成本高、无法反映资产质量、忽略汇率损益”的痛点。

* **核心价值：** 剥离流水杂项，通过“快照”看清真实的财富增长曲线与资产结构。

---

## 2. 核心金融逻辑 (Business Logic)

### 2.1 计价与汇率逻辑

* **基准货币：** 系统统一使用 **CNY** 作为统计币种。
* **锁定汇率：** 每次盘点录入时，系统自动抓取并**锁定**当日汇率。历史快照的价值不随当前汇率波动，以保证财务历史的真实性。
* **损益归因分析：** 对比两次盘点时，系统需自动分离“汇率贡献”与“资产增值”。
* 



### 2.2 自动化计算引擎

* **固定资产折旧：** 采用直线折旧法。
* 


* **负债自动摊销：** * 逻辑：根据设置的“月供额”和“还款日”，系统检测上次盘点至今跨越的还款周期，自动扣减剩余本金。
* **最新原则 (Latest-in-Period)：** * 趋势图聚合：若单月内有多次盘点，趋势图仅采用该月**最后一次**快照数据。
* 对比逻辑：始终对比物理时间序列上的上一次快照。



---

## 3. 交互结构设计 (UI/UX Architecture)

### 3.1 主界面：三屏看板 (Triple-View Dashboard)

采用水平滑动（Carousel）交互，单一主屏承载所有核心信息。

| 视图位置 | 模块名称 | 核心内容与功能 |
| --- | --- | --- |
| **左滑屏 (Left)** | **历史档案 (History)** | 按时间倒序的快照列表。支持查看旧快照的详细组成。 |
| **中心屏 (Center)** | **最新看板 (Dashboard)** | 1. 净资产总额、资产/负债总额。<br>

<br>2. 资产配置饼图。<br>

<br>3. 净资产 12 个月趋势图。 |
| **右滑屏 (Right)** | **对比分析 (Comparison)** | 1. 资产变动绝对值/百分比。<br>

<br>2. 各分类增减详情。<br>

<br>3. 汇率损益特别标注。 |

### 3.2 录入流程 (The Snap Flow)

* **入口：** 主界面右下角悬浮按钮 (FAB)。
* **逻辑：** 1. **智能预填：** 自动填充上一次盘点数据 + 自动化引擎计算出的更新值（折旧/扣款）。
2. **交互体验：** 资产按分类展示；未修改项显示为置灰状态；点击 Check 标记确认无误，或直接点击数值进行覆盖修改。
3. **资产范围：** 仅展示“非归档”资产。

### 3.3 用户与设置 (Settings)

* **入口：** 主界面右上角用户图标。
* **功能：**
1. **资产字典管理：** 新增、修改账户信息，设置自动化参数，执行“归档”操作。
2. **注销账户：** 触发硬删除（Hard Delete），清空所有数据库记录且不可恢复。需二次文字校验确认。



---

## 4. 功能详细需求清单

### 4.1 资产账户字典 (Asset Dictionary)

* **分类：** 现金及等价物、权益投资（股票/基金）、固定资产（房产/汽车/奢侈品）、负债。
* **状态管理：** 支持“激活”与“归档”。归档资产不参与新盘点录入，但保留历史快照贡献。

### 4.2 自动化配置参数

* **固定资产：** 需录入 `买入价格`、`购买日期`、`预计使用年限`。
* **负债：** 需录入 `初始贷款`、`月供额`、`还款日`。

### 4.3 汇率服务

* 接入第三方汇率 API，支持多币种（至少包含 CNY, USD, HKD, EUR）。
* 具备汇率缓存机制，确保离线时仍可使用最后一次成功获取的汇率。

---

## 5. 异常处理与约束 (Constraints)

1. **防误删：** 禁止删除已有快照记录关联的资产账户，强制引导至“归档”操作。
2. **数据完整性：** 注销账户需执行级联删除（Cascade Delete），确保数据库不留死数据。
3. **录入覆盖：** 即使系统执行了自动计算（如房贷扣减），用户在录入页面的手动输入永远拥有最高优先级。

---

## 6. 技术实现建议 (PM 对开发的建议)

* **架构：** 推荐 **Local-first** 模式，以响应速度和隐私为第一优先级。
* **状态管理：** 使用 Zustand 管理录入过程中的临时状态，防止录入中断丢失进度。
* **动效：** 三屏切换应追求原生级的丝滑感（推荐使用 Framer Motion）。

---